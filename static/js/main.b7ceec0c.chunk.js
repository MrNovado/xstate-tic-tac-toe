(this["webpackJsonpxstate-tic-tac-toe"]=this["webpackJsonpxstate-tic-tac-toe"]||[]).push([[0],{35:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),a=n(27),c=n.n(a),o=(n(35),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))}),u=n(21),l=n(44),s=n(45),d="user",O="agent",b="player1",y="player2",j="x",f="0",p=[[0,1,2],[3,4,5],[6,7,8]],T=[[0,3,6],[1,4,7],[2,5,8]],v=[[0,4,8],[2,4,6]],R={CORNERS:{TOP_LEFT:0,TOP_RIGHT:2,BOT_LEFT:6,BOT_RIGHT:8},EDGES:{TOP:1,LEFT:3,RIGHT:5,BOT:7},CENTER:4,COMBINATIONS:[].concat(p,T,v),ROWS:p,COLUMNS:T,DIAGONALS:v},E=[null,null,null,null,null,null,null,null,null],x="CHANGE_PLAYER_REQ",g="CONTINUE_REQ",m="CHANGE_TURN_ORDER_REQ",C="ACCEPT_TURN_REQ",h="GIVE_UP_TURN_REQ",N="RETRY_REQ",S="SET_UP_NEW_GAME",_="MAKE_TURN_REQ",I=n(30),k=n(12),G=n(2),w=n(46),B=n(5),P=n(43),F=n(22),L=n.n(F),M="@/awaitingTurn",H="@/makingTurn",A="@/tryingToWin",D="@/tryingToBlockWin",U="@/tryingToFork",W="@/tryingToBlockFork",Q="@/tryingToTakeCenter",K="@/tryingToTakeOppositeCorner",z="@/tryingToTakeCorner",J="@/tryingToTakeEmptySide",Y="@/givingUp",V="verifyTurnReady",q="saveField",X="makeTurn",Z="assesWinning",$="assesBlockingWin",ee="assesForking",te="assesBlockingFork",ne="assesTakingCenter",re="assesTakingOppositeCorner",ie="assesTakingCorner",ae="assesTakingSide",ce="giveUp",oe=n(14);function ue(e){return e===j?f:j}var le={target:H,cond:V},se=function(e){var t,n;return Object(w.a)({context:{field:E,player:y,symbol:e,moveReady:null},initial:M,states:(t={},Object(G.a)(t,M,{on:Object(G.a)({},_,{target:A,actions:[q]})}),Object(G.a)(t,H,{always:[{target:M,actions:X}]}),Object(G.a)(t,A,{entry:Z,always:[le,{target:D}]}),Object(G.a)(t,D,{entry:$,always:[le,{target:U}]}),Object(G.a)(t,U,{entry:ee,always:[le,{target:W}]}),Object(G.a)(t,W,{entry:te,always:[le,{target:Q}]}),Object(G.a)(t,Q,{entry:ne,always:[le,{target:K}]}),Object(G.a)(t,K,{entry:re,always:[le,{target:z}]}),Object(G.a)(t,z,{entry:ie,always:[le,{target:J}]}),Object(G.a)(t,J,{entry:ae,always:[le,{target:Y}]}),Object(G.a)(t,Y,{always:[{target:M,actions:ce}]}),t)},{guards:Object(G.a)({},V,(function(e){var t=e.moveReady;return"commit"===(null===t||void 0===t?void 0:t.type)})),actions:(n={},Object(G.a)(n,q,Object(B.b)({player:function(e,t){return t.player},field:function(e,t){return t.field}})),Object(G.a)(n,X,Object(B.l)((function(e){var t=e.player,n=e.moveReady;return"commit"===(null===n||void 0===n?void 0:n.type)?{type:C,index:n.turnTo,sender:t}:{type:h}}),{delay:300})),Object(G.a)(n,ce,Object(B.l)((function(){return{type:h}}),{delay:300})),Object(G.a)(n,Z,Object(B.b)({moveReady:function(e){return de(e.field,e.symbol)}})),Object(G.a)(n,$,Object(B.b)({moveReady:function(e){return de(e.field,ue(e.symbol))}})),Object(G.a)(n,ee,Object(B.b)({moveReady:function(e){return Oe(e.field,e.symbol)}})),Object(G.a)(n,te,Object(B.b)({moveReady:function(e){return Oe(e.field,ue(e.symbol))}})),Object(G.a)(n,ne,Object(B.b)({moveReady:function(e){return null===e.field[R.CENTER]?{type:"commit",turnTo:R.CENTER}:{type:"tryOtherMove"}}})),Object(G.a)(n,re,Object(B.b)({moveReady:function(e){var t=e.field,n=ue(e.symbol),r=[{is:t[R.CORNERS.TOP_LEFT]===n&&null===t[R.CORNERS.BOT_RIGHT],index:R.CORNERS.BOT_RIGHT},{is:t[R.CORNERS.TOP_RIGHT]===n&&null===t[R.CORNERS.BOT_LEFT],index:R.CORNERS.BOT_LEFT},{is:t[R.CORNERS.BOT_LEFT]===n&&null===t[R.CORNERS.TOP_RIGHT],index:R.CORNERS.TOP_RIGHT},{is:t[R.CORNERS.BOT_RIGHT]===n&&null===t[R.CORNERS.TOP_LEFT],index:R.CORNERS.TOP_LEFT}].filter((function(e){return e.is})),i=L()(r);return i?{type:"commit",turnTo:i.index}:{type:"tryOtherMove"}}})),Object(G.a)(n,ie,Object(B.b)({moveReady:function(e){var t=e.field,n=[{value:t[R.CORNERS.TOP_LEFT],index:R.CORNERS.TOP_LEFT},{value:t[R.CORNERS.TOP_RIGHT],index:R.CORNERS.TOP_RIGHT},{value:t[R.CORNERS.BOT_LEFT],index:R.CORNERS.BOT_LEFT},{value:t[R.CORNERS.BOT_RIGHT],index:R.CORNERS.BOT_RIGHT}].filter((function(e){return null===e.value})),r=L()(n);return r?{type:"commit",turnTo:r.index}:{type:"tryOtherMove"}}})),Object(G.a)(n,ae,Object(B.b)({moveReady:function(e){var t=e.field,n=[{value:t[R.EDGES.TOP],index:R.EDGES.TOP},{value:t[R.EDGES.LEFT],index:R.EDGES.LEFT},{value:t[R.EDGES.RIGHT],index:R.EDGES.RIGHT},{value:t[R.EDGES.BOT],index:R.EDGES.BOT}].filter((function(e){return null===e.value})),r=L()(n);return r?{type:"commit",turnTo:r.index}:{type:"tryOtherMove"}}})),n)})};function de(e,t){var n=function(e,t){var n=ue(t);return R.COMBINATIONS.find((function(r){return 2===r.reduce((function(r,i){return e[i]===t?r+1:e[i]===n?r-1:r}),0)}))}(e,t),r=null===n||void 0===n?void 0:n.find((function(t){return null===e[t]}));return void 0!==r?{type:"commit",turnTo:r}:{type:"tryOtherMove"}}function Oe(e,t){var n=function(e,t){var n=function(n){return 1===n.reduce((function(n,r){return e[r]===t?n+1:null===e[r]?n:n-1}),0)},r=p.filter(n),i=T.filter(n),a=v.filter(n);if(r.length){var c,o=Object(oe.a)(r);try{for(o.s();!(c=o.n()).done;){var u,l=c.value,s=Object(oe.a)(l);try{for(s.s();!(u=s.n()).done;){var d,O=u.value,b=Object(oe.a)(i);try{for(b.s();!(d=b.n()).done;){var y=O in d.value,j=null===e[O];if(y&&j)return{intersectionIndex:O}}}catch(B){b.e(B)}finally{b.f()}var f,E=Object(oe.a)(a);try{for(E.s();!(f=E.n()).done;){var x=O in f.value,g=null===e[O];if(x&&g)return{intersectionIndex:O}}}catch(B){E.e(B)}finally{E.f()}}}catch(B){s.e(B)}finally{s.f()}}}catch(B){o.e(B)}finally{o.f()}}if(i.length){var m,C=Object(oe.a)(i);try{for(C.s();!(m=C.n()).done;){var h,N=m.value,S=Object(oe.a)(N);try{for(S.s();!(h=S.n()).done;){var _,I=h.value,k=Object(oe.a)(a);try{for(k.s();!(_=k.n()).done;){var G=I in _.value,w=null===e[I];if(G&&w)return{intersectionIndex:I}}}catch(B){k.e(B)}finally{k.f()}}}catch(B){S.e(B)}finally{S.f()}}}catch(B){C.e(B)}finally{C.f()}}return 2===a.length&&null===e[R.CENTER]?{intersectionIndex:R.CENTER}:null}(e,t);return n?{type:"commit",turnTo:n.intersectionIndex}:{type:"tryOtherMove"}}var be,ye,je,fe,pe,Te,ve,Re,Ee="@/settingUp",xe="@/playing",ge="@/playing/takingTurn",me="@/playing/checkingGameState",Ce="@/showingGameEndResults",he="setPlayer",Ne="setTurnOrder",Se="awaitTurn",_e="assesGameEnd",Ie="saveTurn",ke="saveSurrender",Ge="switchTurn",we="revertContextToInitial",Be="revertContextButOpponents",Pe="verifyTurn",Fe="verifyGameEnd",Le={opponents:(be={},Object(G.a)(be,b,{type:d,symbol:j}),Object(G.a)(be,y,{type:d,symbol:f}),be),turnOrder:{current:b,turnsMade:0},field:E,winCombo:null,surrendered:null},Me=Object(w.a)({context:Le,initial:Ee,states:(Te={},Object(G.a)(Te,Ee,{on:(ye={},Object(G.a)(ye,x,{actions:[he]}),Object(G.a)(ye,m,{actions:[Ne]}),Object(G.a)(ye,g,{target:xe}),ye)}),Object(G.a)(Te,xe,{initial:ge,states:(fe={},Object(G.a)(fe,ge,{entry:Se,on:(je={},Object(G.a)(je,C,[{target:me,actions:[Ie,Ge],cond:Pe},{target:me}]),Object(G.a)(je,h,{target:"#".concat(Ce),actions:[ke]}),je)}),Object(G.a)(fe,me,{entry:_e,always:[{target:"#".concat(Ce),cond:Fe},{target:ge}]}),fe)}),Object(G.a)(Te,Ce,{id:Ce,on:(pe={},Object(G.a)(pe,N,{target:xe,actions:[Be]}),Object(G.a)(pe,S,{target:Ee,actions:[we]}),pe)}),Te)},{guards:(ve={},Object(G.a)(ve,Pe,(function(e,t){var n=e.field;return t.type===C&&null===n[t.index]})),Object(G.a)(ve,Fe,(function(e){var t=e.winCombo,n=e.surrendered,r=e.turnOrder;return Boolean(t||n)||9===r.turnsMade})),ve),actions:(Re={},Object(G.a)(Re,we,Object(B.b)(Object(k.a)({},Le))),Object(G.a)(Re,Be,Object(B.b)((function(e){return Object(k.a)(Object(k.a)({},Le),{},{opponents:e.opponents})}))),Object(G.a)(Re,he,Object(B.b)({opponents:function(e,t){if(t.type===x){var n,r,i=e.opponents[t.kind];if(i.type===O)null===(n=(r=i.ref).stop)||void 0===n||n.call(r);var a=t.kind===b?j:f,c=t.value===d?{type:d,symbol:a}:{type:O,ref:Object(P.b)(se(a),{name:t.kind}),symbol:a};return Object(k.a)(Object(k.a)({},e.opponents),{},Object(G.a)({},t.kind,c))}return e.opponents}})),Object(G.a)(Re,Ne,Object(B.b)({turnOrder:function(e,t){return t.type===m?Object(k.a)(Object(k.a)({},e.turnOrder),{},{current:t.first}):e.turnOrder}})),Object(G.a)(Re,Se,(function(e){var t=e.opponents[e.turnOrder.current];t.type===O&&t.ref.send({type:_,field:e.field,player:e.turnOrder.current})})),Object(G.a)(Re,Ie,Object(B.b)({field:function(e,t){if(t.type===C){var n=Object(I.a)(e.field),r=e.opponents[t.sender].symbol;return n[t.index]=r,n}return e.field}})),Object(G.a)(Re,ke,Object(B.b)({surrendered:function(e){return e.turnOrder.current}})),Object(G.a)(Re,_e,Object(B.b)({winCombo:function(e){var t=e.field,n=e.winCombo,r=R.COMBINATIONS.find((function(e){var n=Object(u.a)(e,3),r=n[0],i=n[1],a=n[2];return!(!t[r]||t[r]!==t[i]||t[r]!==t[a])})),i=t.some((function(e){return null===e}));return r||!i?r:n}})),Object(G.a)(Re,Ge,Object(B.b)({turnOrder:function(e){return Object(k.a)(Object(k.a)({},e.turnOrder),{},{current:e.turnOrder.current===b?y:b,turnsMade:e.turnOrder.turnsMade+1})}})),Re)}),He=n(6);Object(s.a)({iframe:!1});var Ae=function(){},De=function(){var e=Object(l.a)(Me,{devTools:!0}),t=Object(u.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){console.log({turn:n.context.turnOrder.turnsMade,context:n.context,events:n.events,value:n.value})})),Object(He.jsx)("div",{style:{width:"50%",margin:"10% auto auto auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:function(){switch(!0){case n.matches(Ee):return Object(He.jsxs)("div",{style:{display:"grid",gap:8},children:[Object(He.jsx)("button",{style:{minWidth:150,height:50},type:"button",onClick:function(){return i({type:g})},children:"Player vs Player"}),Object(He.jsx)("button",{style:{minWidth:150,height:50},type:"button",onClick:function(){i({type:x,kind:y,value:O}),i({type:g})},children:"Player vs AI"}),Object(He.jsx)("button",{style:{minWidth:150,height:50},type:"button",onClick:function(){i({type:x,kind:b,value:O}),i({type:x,kind:y,value:O}),i({type:g})},children:"AI vs AI"})]});case n.matches(xe):var e=n.context.turnOrder.current,t=n.context.opponents[e].symbol,r=n.context.opponents[e].type===d,a=r?function(t){return function(){i({type:C,index:t,sender:e})}}:function(){return Ae};return Object(He.jsxs)("div",{style:{display:"grid",gap:16},children:[Object(He.jsx)("h3",{children:"".concat(e," (").concat(t,") to make turn")}),Object(He.jsx)("div",{style:{display:"grid",gridTemplateColumns:"100px 100px 100px",gridTemplateRows:"100px 100px 100px",gap:8},children:n.context.field.map((function(e,t){return Object(He.jsx)("div",{style:{outline:"1px solid gray",cursor:"pointer",fontSize:50,display:"flex",justifyContent:"center",alignItems:"center"},role:"button",tabIndex:t,onKeyDown:Ae,onClick:a(t),children:e},t)}))}),r?Object(He.jsx)("button",{type:"button",onClick:function(){return i({type:h})},children:"Give up"}):Object(He.jsx)("button",{type:"button",disabled:!0,children:"---"})]});case n.matches(Ce):return Object(He.jsxs)("div",{style:{display:"grid",gap:16},children:[Object(He.jsx)("h3",{children:"Game ended"}),Object(He.jsx)("div",{style:{display:"grid",gridTemplateColumns:"100px 100px 100px",gridTemplateRows:"100px 100px 100px",gap:8},children:n.context.field.map((function(e,t){var r;return Object(He.jsx)("div",{title:"".concat(t),style:{outline:"1px solid gray",cursor:"pointer",fontSize:50,display:"flex",justifyContent:"center",alignItems:"center",background:(null===(r=n.context.winCombo)||void 0===r?void 0:r.includes(t))?"green":void 0},children:e},t)}))}),Object(He.jsx)("button",{type:"button",onClick:function(){return i({type:N})},children:"Retry"}),Object(He.jsx)("button",{type:"button",onClick:function(){return i({type:S})},children:"New game"}),n.context.winCombo&&Object(He.jsx)("div",{children:"Win combination ".concat(n.context.winCombo)}),n.context.surrendered&&Object(He.jsx)("div",{children:"".concat(n.context.surrendered," surrendered!")}),!n.context.winCombo&&!n.context.surrendered&&Object(He.jsx)("div",{children:"It`s a draw"})]});default:return Object(He.jsx)("div",{children:"UNKNOWN STATE"})}}()})},Ue=function(){return Object(He.jsx)(De,{})};c.a.render(Object(He.jsx)(i.a.StrictMode,{children:Object(He.jsx)(Ue,{})}),document.getElementById("root")),o()}},[[40,1,2]]]);
//# sourceMappingURL=main.b7ceec0c.chunk.js.map